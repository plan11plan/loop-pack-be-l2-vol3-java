---
name: tdd
description: |
  TDD ë°©ì‹ìœ¼ë¡œ ê¸°ëŠ¥ì„ ê°œë°œí•  ë•Œ ì‚¬ìš©. DESIGN.mdì—ì„œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë„ì¶œí•˜ê³ ,
  Red-Green-Refactor ë£¨í”„ë¥¼ ê¸°ëŠ¥ ë‹¨ìœ„ ìˆ˜ì§ ìŠ¬ë¼ì´ìŠ¤(Domain â†’ Application ê´€í†µ)ë¡œ ì‹¤í–‰í•œë‹¤.
  "TDDë¡œ ê°œë°œ", "í…ŒìŠ¤íŠ¸ ë¨¼ì €", "TDD ëª¨ë“œ", "Red-Green-Refactor" ì‹œ íŠ¸ë¦¬ê±°.
---

# TDD Skill

DESIGN.md ê¸°ë°˜ Red-Green-Refactor ì‹¤í–‰ ìŠ¤í‚¬. í•µì‹¬ ê·œì¹™ê³¼ ê³„ì¸µë³„ ì „ëµì€ CLAUDE.mdì— ìˆìœ¼ë¯€ë¡œ, ì´ íŒŒì¼ì€ **ì‹œì‘ ì‹œ í•œ ë²ˆë§Œ** ì½ëŠ”ë‹¤.

---

## ì‚¬ì „ ì¡°ê±´

ìŠ¤í‚¬ ì‹¤í–‰ ì „ ë°˜ë“œì‹œ Read:

1. `docs/spec/{domain}/DESIGN.md` â€” ìœ ì¦ˆì¼€ì´ìŠ¤, ì‹œí€€ìŠ¤, í´ë˜ìŠ¤, ERD
2. `.claude/skills/project-convention/references/common/test-convention.md` â€” í…ŒìŠ¤íŠ¸ êµ¬ì¡°, ë„¤ì´ë°, ë”ë¸” ì „ëµ

---

## Step 1: í…ŒìŠ¤íŠ¸ ëª©ë¡í‘œ + ì§„í–‰ ë¬¸ì„œ ìƒì„±

DESIGN.mdì—ì„œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë„ì¶œí•˜ì—¬ ì •ë¦¬í•œë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feature: {ê¸°ëŠ¥ëª…}                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ê³„ì¸µ      â”‚ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ       â”‚ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Domain   â”‚ {Entity/VO}      â”‚ {ì¼€ì´ìŠ¤}               â”‚
â”‚  Domain   â”‚ {Service}        â”‚ {ì¼€ì´ìŠ¤}               â”‚
â”‚  App      â”‚ {Facade}         â”‚ {ì¼€ì´ìŠ¤}               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë°˜ë“œì‹œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ê³  í™•ì¸ì„ ë°›ì€ í›„ ì§„í–‰í•œë‹¤.**

í™•ì¸ í›„ ì§„í–‰ ë¬¸ì„œë¥¼ `docs/tdd/{domain}/{feature}.md`ì— ìƒì„±í•œë‹¤. (í…œí”Œë¦¿ì€ í•˜ë‹¨ ì°¸ì¡°)

## Step 2: Round ë£¨í”„ ì‹¤í–‰

CLAUDE.mdì˜ TDD í•µì‹¬ ê·œì¹™ì— ë”°ë¼ Red â†’ Green â†’ Refactorë¥¼ ë°˜ë³µí•œë‹¤. ë§¤ Round í›„ ì§„í–‰ ë¬¸ì„œì˜ í•´ë‹¹ Round ìƒíƒœë¥¼ ê°±ì‹ í•œë‹¤.

- ğŸ”´ Red í›„: `ğŸ”´ Red: âœ… ì‹¤íŒ¨ í™•ì¸ â€” {ìš”ì•½}`
- ğŸŸ¢ Green í›„: `ğŸŸ¢ Green: âœ… í†µê³¼ â€” {ìš”ì•½}`
- ğŸ”µ Refactor í›„: `ğŸ”µ Refactor: âœ… {ìš”ì•½}` ë˜ëŠ” `skip`

## Step 3: ì „ì²´ í…ŒìŠ¤íŠ¸

`./gradlew :apps:commerce-api:test` ì‹¤í–‰. ì§„í–‰ ë¬¸ì„œì— ê²°ê³¼ ê¸°ë¡.

## Step 4: ì™„ë£Œ ë³´ê³ 

ìƒíƒœë¥¼ `âœ… ì™„ë£Œ`ë¡œ ë³€ê²½, ì‚°ì¶œë¬¼ ê²½ë¡œ ê¸°ë¡, ì»¤ë°‹ ì œì•ˆ.

```
âœ… TDD ì™„ë£Œ
Feature: {ê¸°ëŠ¥ëª…}
- í…ŒìŠ¤íŠ¸: {N}ê°œ ì‘ì„±, ì „ì²´ í†µê³¼
- êµ¬í˜„: {íŒŒì¼ ëª©ë¡ ìš”ì•½}
ì»¤ë°‹ì„ ì§„í–‰í• ê¹Œìš”?
```

---

## Fake ì‘ì„± ê·œì¹™

Domain Service í…ŒìŠ¤íŠ¸ì—ì„œ Repository ëŒ€ì²´ ì‹œ Fake ìš°ì„  ì‚¬ìš©. ê¸°ì¡´ `FakeBrandRepository` ì°¸ê³ .

- `HashMap<Long, Entity>` + `AtomicLong`ìœ¼ë¡œ ì €ì¥ì†Œ êµ¬í˜„
- `save()`: id ì—†ìœ¼ë©´ ìë™ ìƒì„±, storeì— ì €ì¥
- `findById()`: storeì—ì„œ ì¡°íšŒ, soft delete í•„í„°ë§
- í…ŒìŠ¤íŠ¸ ì†ŒìŠ¤(`src/test/java`)ì— ë°°ì¹˜

### Fake vs Mockito íŒë‹¨

```
ì™¸ë¶€ ì˜ì¡´ ì—†ìŒ â†’ ë”ë¸” ë¶ˆí•„ìš” (Entity, VO)
ì™¸ë¶€ ì˜ì¡´ ìˆìŒ + Domain ê³„ì¸µ â†’ Fake
ì™¸ë¶€ ì˜ì¡´ ìˆìŒ + Application ê³„ì¸µ â†’ Mockito mock()
```

---

## í”„ë¡œë•ì…˜ ì½”ë“œ ì‘ì„± ì‹œ ì°¸ì¡°

| ëŒ€ìƒ | ê²½ë¡œ |
|------|------|
| Entity, VO | `.claude/skills/project-convention/references/domain/entity-vo-convention.md` |
| Service | `.claude/skills/project-convention/references/application/service-layer-convention.md` |
| í…ŒìŠ¤íŠ¸ | `.claude/skills/project-convention/references/common/test-convention.md` |

---

## í…œí”Œë¦¿: ì§„í–‰ ë¬¸ì„œ

```markdown
# TDD: {Feature í•œê¸€ëª…}

| í•­ëª© | ë‚´ìš© |
|------|------|
| ë„ë©”ì¸ | {domain} |
| ìƒíƒœ | ğŸŸ¡ ì§„í–‰ ì¤‘ |
| DESIGN.md | docs/spec/{domain}/DESIGN.md |

---

## í…ŒìŠ¤íŠ¸ ëª©ë¡í‘œ

{Step 1ì—ì„œ ë„ì¶œí•œ í…ŒìŠ¤íŠ¸ ëª©ë¡í‘œ}

---

## Round ì§„í–‰ í˜„í™©

### Round 1: {í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëª…}
- ğŸ”´ Red: â³ ëŒ€ê¸°
- ğŸŸ¢ Green: â³ ëŒ€ê¸°
- ğŸ”µ Refactor: â³ ëŒ€ê¸°

(ëª¨ë“  í•­ëª©ì„ Roundë¡œ ë‚˜ì—´)

---

## ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼

(Step 3 ì™„ë£Œ í›„ ê¸°ë¡)

---

## ì‚°ì¶œë¬¼

(Step 4 ì™„ë£Œ í›„ ê¸°ë¡)

### í…ŒìŠ¤íŠ¸ íŒŒì¼
- `src/test/java/.../{TestClass}.java` (new)

### í”„ë¡œë•ì…˜ íŒŒì¼
- `src/main/java/.../{Class}.java` (new)

### Fake
- `src/test/java/.../Fake{Repository}.java` (new)
```
